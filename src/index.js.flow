/* @flow */

declare module 'reactive-charts' {
  declare type ICartesianData = [string, number];

  declare interface IFunctor<T> {
    map<U>(f: (t: T) => U): IFunctor<U>;
  }

  declare interface IComponent {
    label: string | (datum: any) => string;
    tooltip: [string] | (datum: any) => string;
  }

  declare interface ICartesianComponent {
    x: ICartesianData | (datum: any) => string | number;
    y: ICartesianData | (datum: any) => string | number;
  }

  declare interface IBarComponent extends IComponent, ICartesianComponent {
    type: 'bar'
  }

  declare interface ILineComponent extends IComponent {
    type: 'line'
  }

  declare interface ILayout {
    barmode?: 'stack' | 'group';
    xAxis?: any;
    yAxis?: any;
    showLegend?: boolean;
  }

  declare function chart(components: IComponent[], layout: ILayout, data?: any): IFunctor<any>;

  declare module.exports: {
    chart: chart
  }
}
